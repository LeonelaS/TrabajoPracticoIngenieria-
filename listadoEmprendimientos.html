<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listado de Emprendimientos</title>
    <link rel="stylesheet" href="styleEmprendimiento.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>

<body>
    <div class="container" id="listado">
        <!-- Las tarjetas se cargar치n aqu칤 -->
    </div>

    <!-- Incluir los archivos JS de Leaflet -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="mapaDeEmprendimiento.js"></script>
    <script src="talleres.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const contenedor = document.getElementById('listado');

            talleres_fisicos.forEach((emprendimiento, id) => {
                const card = document.createElement('div');
                card.className = 'card';

                const infoDiv = document.createElement('div');
                infoDiv.className = 'card-info';

                const nombre = document.createElement('h2');
                nombre.textContent = emprendimiento.nombre;

                const imagen = document.createElement('img');
                imagen.src = "Imagenes/Papeler칤a bonita 游뱔.jpg";

                const descripcion = document.createElement('p');
                descripcion.textContent = `Descripci칩n: ${emprendimiento.descripcion}`;

                const rubro = document.createElement('h3');
                rubro.textContent = `Rubro: ${emprendimiento.rubro}`;

                const contacto = document.createElement('h3');
                contacto.textContent = `Contacto: ${emprendimiento.contacto}`;

                const redes = document.createElement('h3');
                redes.textContent = `Redes Sociales: ${emprendimiento.redes_sociales}`;

                const pago = document.createElement('h3');
                pago.textContent = `Formas de Pago: ${emprendimiento.formas_de_pago}`;

                const zona_influencia = document.createElement('h3');
                zona_influencia.textContent = `Zona de Influencia: ${emprendimiento.zona_influencia}`;

                const restriccion = document.createElement('h3');
                restriccion.textContent = `Restricciones: ${emprendimiento.restricciones}`;

                infoDiv.appendChild(nombre);
                infoDiv.appendChild(imagen);
                infoDiv.appendChild(descripcion);
                infoDiv.appendChild(rubro);
                infoDiv.appendChild(contacto);
                infoDiv.appendChild(redes);
                infoDiv.appendChild(pago);
                infoDiv.appendChild(zona_influencia);
                infoDiv.appendChild(restriccion);

                card.appendChild(infoDiv);

                if (emprendimiento.tiene_comercio && emprendimiento.direccion_disponible) {
                    const direccion = document.createElement('h3');
                    direccion.textContent = `Direccion: ${emprendimiento.direccion}`;

                    const horario = document.createElement('h3');
                    horario.textContent = `Horarios: ${emprendimiento.horario}`;

                    const localidad = document.createElement('h3');
                    localidad.textContent = `Localidad: ${emprendimiento.localidad}`;

                    infoDiv.appendChild(direccion);
                    infoDiv.appendChild(horario);
                    infoDiv.appendChild(localidad);

                    const mapDiv = document.createElement('div');
                    mapDiv.className = 'card-map';
                    // mapDiv.id = `card-map-${emprendimiento.id}`;
                    mapDiv.id = 'card-map';

                    // Inicializar mapa
                    var mapa2 = L.map('map').setView([-34.523013308639, -58.70045616768699], 14); // Coordenadas de la Universidad Nacional de General Sarmiento

                    // A침adir una capa de mapa base
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
                        maxZoom: 19,
                    }).addTo(mapa2);

                    // A침adir un marcador
                    L.marker([-34.523013308639, -58.70045616768699]).addTo(mapa2)
                        .bindPopup('Universidad Nacional de General Sarmiento')
                        .openPopup();

                    card.appendChild(mapDiv);

                    // setTimeout(() => {
                    //     const mapa2 = L.map(mapDiv.id).setView(emprendimiento.posicion, 14);
                    //     L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    //         attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
                    //         maxZoom: 19,
                    //     }).addTo(mapa2);

                    //     L.marker(emprendimiento.posicion).addTo(mapa2)
                    //         .bindPopup(emprendimiento.nombre)
                    //         .openPopup();
                    // }, 1);
                }

                contenedor.appendChild(card);
            });
        });
    </script>

</body>

</html>
